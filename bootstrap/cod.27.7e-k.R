#' Data from cod.27.7e-k
#'
#' @name cod.27.7e-k
#' @format csv file
#' @tafOriginator ICES, WGCSE
#' @tafYear 2020
#' @tafAccess Public
#' @tafSource script

library(icesTAF)
source(taf.boot.path("..", "utilities_bootstrap.R"))

if (FALSE) {
  data <- get_soa_fs("Cod_7ek_WGCSE2020")
  data$stock_code <- "cod.27.7e-k"
  data$assessment_year <- 2020
  write.taf(data)

  cat(
    "NOTE:
* Due to an ongoing benchmark for this stock, advice release was postponed for 2020. Advice is being drafted and is due to be published on the October 30th, so F-at-age is not final, and will be updated int he DB when approved.
",
    file = "README.md"
  )
}



contents <-
  "Year 1 2 3 4 5 6 7
1971 0.219 0.685 0.635 0.550 0.359 0.519 0.519
1972 0.006 0.518 0.397 0.567 0.585 0.521 0.521
1973 0.165 0.731 0.553 0.437 0.442 0.481 0.481
1974 0.001 0.208 0.290 0.407 0.595 0.435 0.435
1975 0.156 0.367 0.313 1.160 0.871 0.791 0.791
1976 0.034 0.838 0.327 0.333 0.717 0.463 0.463
1977 0.011 0.570 0.352 0.135 0.338 0.277 0.277
1978 0.097 0.431 0.405 0.322 0.287 0.340 0.340
1979 0.089 0.340 0.512 0.433 0.585 0.515 0.515
1980 0.066 0.513 0.601 0.896 0.767 0.764 0.764
1981 0.082 0.776 0.987 0.890 0.580 0.829 0.829
1982 0.048 0.680 0.653 0.642 0.586 0.633 0.633
1983 0.274 0.747 0.987 0.861 0.741 0.874 0.874
1984 0.153 0.617 0.499 0.514 0.496 0.507 0.507
1985 0.175 0.577 0.624 0.505 0.450 0.531 0.531
1986 0.184 0.752 0.881 0.978 0.536 0.808 0.808
1987 0.148 0.596 0.757 1.165 0.726 0.894 0.894
1988 0.215 0.691 0.497 0.606 0.763 0.629 0.629
1989 0.269 0.768 1.010 0.510 0.978 0.843 0.843
1990 0.121 0.923 0.942 0.954 0.602 0.843 0.843
1991 0.170 0.865 0.869 1.173 1.018 1.034 1.034
1992 0.172 0.786 0.948 0.724 0.948 0.884 0.884
1993 0.101 0.656 0.908 0.705 0.726 0.789 0.789
1994 0.135 0.536 1.067 0.793 0.603 0.831 0.831
1995 0.116 0.811 0.588 0.920 0.585 0.706 0.706
1996 0.114 0.743 1.001 0.618 1.059 0.904 0.904
1997 0.166 0.838 1.056 0.839 0.506 0.810 0.810
1998 0.180 0.927 0.993 1.102 0.837 0.990 0.990
1999 0.319 0.795 1.009 0.817 0.927 0.930 0.930
2000 0.230 0.788 0.976 0.730 0.607 0.817 0.817
2001 0.174 0.825 0.676 0.723 0.858 0.612 0.612
2002 0.133 0.817 1.103 0.932 0.620 0.351 0.351
2003 0.108 0.875 1.227 1.075 0.629 0.354 0.354
2004 0.163 0.721 0.960 1.061 1.143 0.903 0.903
2005 0.096 0.771 1.155 1.017 1.065 0.706 0.706
2006 0.110 0.750 0.938 0.741 0.953 1.194 1.194
2007 0.180 0.943 1.031 0.692 0.718 0.866 0.866
2008 0.104 0.656 0.799 0.901 0.727 0.901 0.901
2009 0.072 0.493 0.786 0.692 1.174 0.831 0.831
2010 0.052 0.376 0.493 0.596 0.837 1.185 1.185
2011 0.513 0.681 0.416 0.446 0.461 0.439 0.439
2012 0.057 0.411 0.877 1.048 0.454 0.395 0.395
2013 0.113 0.714 0.992 0.985 1.242 0.890 0.890
2014 0.167 0.782 0.918 0.861 0.998 0.552 0.552
2015 0.089 0.851 0.900 0.701 0.740 0.564 0.564
2016 0.116 0.428 1.172 0.775 0.471 0.527 0.527
2017 0.048 0.882 1.146 0.909 1.270 0.691 0.691
2018 0.117 0.966 1.002 0.547 0.819 0.973 0.973
"

contents <- strsplit(strsplit(contents, "\n")[[1]], " ")

fdata <-
  do.call(
    rbind.data.frame,
    contents[-1]
  )
names(fdata) <- contents[[1]]
fdata[] <- lapply(fdata, type.convert, as.is = TRUE)
fdata

data <- taf2long(fdata, names = c("year", "age", "harvest"))

data$stock_code <- "cod.27.7e-k"
data$assessment_year <- 2019
write.taf(data)
